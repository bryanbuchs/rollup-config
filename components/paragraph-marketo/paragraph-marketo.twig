{{ attach_library('b2b/paragraph-marketo') }}

{# <script src="//app-ab15.marketo.com/js/forms2/js/forms2.min.js"></script> #}

{% set config = [
    'layout-grid-wide',
    'paragraph-marketo',
    'layout-grid'
  ] %}

{% set wrapper = 'marketo-' ~ id|clean_unique_id %}
{% set dialog = wrapper ~ '-dialog' %}

<section {{attributes.setAttribute('class', config)}}>
  <div class="layout-grid-wide">

    <h2>{{ heading|typography }}</h2>

    {{ text }}

    <p>
      <button data-marketo-modal="{{ wrapper }}" type="button" aria-label="open form">
        {{ label }}
      </button>
    </p>

  </div>

  {# marketo form in modal #}
  <div id="{{ wrapper }}" class="marketo-modal" aria-hidden>
    <div tabindex="-1" class="marketo-modal-overlay" data-micromodal-close>
      <div id="{{ dialog }}" role="dialog" aria-modal="true" aria-label="{{ heading }}" class="marketo-modal-dialog">
        <button type="button" class="marketo-modal-close" aria-label="Close" data-micromodal-close></button>
        <div class="marketo-modal-content">
          {% block content %}

            <form method="post" id="{{ 'mktoForm_' ~ formid }}" data-formid="{{ formid }}" accept-charset="UTF-8">

              <div class="mktoForm-adblock">
                <p>
                  Ooops. Looks like you have javascript turned off! This means you can't see the form on this page you can use to
                  <a href="mailto:scpd-information@stanford.edu">
                    contact us
                  </a>.
                </p>
              </div>

            </form>
          {% endblock %}
        </div>
      </div>
    </div>
  </div>

</section>
